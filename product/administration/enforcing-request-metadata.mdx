---
title: "Enforcing Request Metadata"
---
## Overview
Portkey allows organization owners to define mandatory [metadata](/product/observability/metadata) fields that must be included with every API request. When enabled, any request missing the required metadata will be automatically rejected with error code `AB01`. This feature enables granular observability across your organization's API usage.

## How It Works
Organization owners can define JSON schemas specifying required metadata properties for:
- API keys
- Workspaces

These metadata requirements are strictly enforced whenever:
- A new API key is created
- A new workspace is created

<Note>
    Existing API keys and Workspaces will not be affected by the new metadata schema. The new schema will only be enforced on NEW API keys and Workspaces.
</Note>

## Configuration
### Setting Up Metadata Requirements
1. Navigate to the `Organization Properties` section in the Portkey dashboard
2. Select either `API Key Metadata Schema` or `Workspace Metadata Schema`
3. Create a [JSON schema](#json-schema-requirements) specifying your required metadata fields
4. Add or modify the metadata schema
5. Save your changes

## JSON Schema Requirements
The metadata schema follows [JSON Schema draft-07](https://json-schema.org/draft-07) with certain modifications:

### Required Schema Properties
- `"type": "object"` at the top level must always be present
- `"additionalProperties": true` must be present and always set to `true`
- Properties inside the schema must always have `"type": "string"`

| Requirement | Description |
| ----------- | ----------- |
| `"type": "object"` | The top-level schema must be declared as an object |
| `"properties": {...}` | Define the metadata fields and their constraints |
| `"additionalProperties": true` | Additional properties must be allowed |


<AccordionGroup>
  <Accordion title="Basic Schema">

```json
{
  "type": "object",
  "properties": {
    "team_id": {
      "type": "string"
    },
    "environment": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
```
</Accordion>

<Accordion title="Schema With Required Fields">

```json
{
  "type": "object",
  "required": ["team_id", "service_id"],
  "properties": {
    "team_id": {
      "type": "string"
    },
    "service_id": {
      "type": "string"
    },
    "environment": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
```

</Accordion>
<Accordion title="Schema With Default Values">
```json
{
  "type": "object",
  "properties": {
    "usertype": {
      "type": "string"
    },
    "environment": {
      "type": "string",
      "default": "dev"
    }
  },
  "additionalProperties": true
}
```

  </Accordion>
  <Accordion title="Schema With Enum Values">

```json
{
  "type": "object",
  "properties": {
    "use_case": {
      "type": "string",
      "enum": [
        "research",
        "instruction",
        "administrative"
      ]
    }
  },
  "additionalProperties": true
}
```

</Accordion>

</AccordionGroup>




## Using this Metadata in Portkey
### When Creating API Keys
When creating a new API key (either Service or User type), you must provide metadata that conforms to the defined schema:
1. Navigate to the API Keys section
2. Click "Create"
3. Fill in the key details
4. In the Metadata field, provide a JSON object with all required fields
5. If any required fields are missing, you'll receive an error

### When Creating Workspaces
When creating a new workspace, you must provide metadata that conforms to the defined schema:
1. Navigate to Workspaces
2. Click "Create New Workspace"
3. Fill in the workspace details
4. In the Metadata field, provide a JSON object with all required fields
5. If any required fields are missing, you'll receive an error

### Default Values
- Properties with default values will be automatically added if not specified
- User-provided values take precedence over default values

<Note>
Best Practices
- Organization owners should clearly communicate metadata requirements to all developers
- Maintain internal documentation of your metadata schema
</Note>

## Support
For questions about configuring metadata schemas or troubleshooting issues, contact [Portkey support](mailto:support@portkey.ai) or reach out on [Discord]().


















---
title: "Organization Properties"
description: "Define rules for metadata for API keys and Workspaces using a JSON schema that is enforced when creating or updating resources."
---

## Overview

Organization Properties allows you to define standardized metadata schemas for API keys and Workspaces in your Portkey environment. These schemas are automatically enforced whenever resources are created or updated, ensuring consistency across your organization.

<Frame>
  <img src="/images/organization-properties/main-view.png" alt="Organization Properties interface"/>
</Frame>

With Organization Properties, you can:

- Enforce consistent metadata across resources
- Set default values for common properties
- Define required fields for compliance
- Restrict values to predefined options using enumerations

## JSON Schema Implementation

Portkey implements a subset of JSON Schema Draft-07 with specific requirements tailored for metadata management. The schema defines the structure and validation rules for metadata applied to resources.

### Schema Requirements

All valid Organization Properties schemas must include:

```json
{
  "type": "object",
  "properties": {
    // Your metadata fields go here
  },
  "additionalProperties": true
}
```


<Note>
  All property values in the schema must use `"type": "string"`. Other data types are not currently supported.
</Note>

## Usage Examples

### Basic Schema

This simple schema defines a single environment property:

```json
{
  "type": "object",
  "properties": {
    "environment": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
```

### Schema with Default Values

Set default values that will be applied automatically when creating resources:

```json
{
  "type": "object",
  "properties": {
    "usertype": {
      "type": "string"
    },
    "environment": {
      "type": "string",
      "default": "dev"
    }
  },
  "additionalProperties": true
}
```

### Schema with Enumerated Values

Restrict field values to a predefined set of options:

```json
{
  "type": "object",
  "properties": {
    "use_case": {
      "type": "string",
      "enum": [
        "research",
        "instruction",
        "administrative"
      ]
    }
  },
  "additionalProperties": true
}
```

### Schema with Required Fields

Make certain metadata fields mandatory:

```json
{
  "type": "object",
  "properties": {
    "usertype": {
      "type": "string"
    },
    "environment": {
      "type": "string",
      "default": "dev"
    }
  },
  "additionalProperties": true,
  "required": ["usertype"]
}
```

## Setting Up Organization Properties

To configure Organization Properties for your Portkey environment:

1. Navigate to **Admin Settings** > **Organization** > **Organization Properties**
2. Select either:
   - **API Key Metadata Schema** - Define metadata properties for API keys
   - **Workspace Metadata Schema** - Define metadata properties for Workspaces
3. Click the **+ Add** button to create a new schema
4. Enter your JSON schema following the requirements outlined above
5. Save your changes

<Frame caption="Adding a new metadata schema">
  <img src="/images/organization-properties/add-schema.png" alt="Adding a metadata schema"/>
</Frame>

## Common Use Cases

Organization Properties can help solve several common metadata management challenges:

### Resource Classification

Categorize resources by department, team, or project:

```json
{
  "type": "object",
  "properties": {
    "department": {
      "type": "string",
      "enum": ["engineering", "marketing", "finance", "research"]
    },
    "project": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
```

### Environment Tracking

Track which environment each resource belongs to:

```json
{
  "type": "object",
  "properties": {
    "environment": {
      "type": "string",
      "enum": ["development", "staging", "production"],
      "default": "development"
    }
  },
  "additionalProperties": true
}
```

### Compliance Management

Ensure resources have necessary compliance information:

```json
{
  "type": "object",
  "properties": {
    "data_classification": {
      "type": "string",
      "enum": ["public", "internal", "confidential", "restricted"]
    },
    "compliance_reviewed": {
      "type": "string",
      "enum": ["yes", "no"],
      "default": "no"
    }
  },
  "required": ["data_classification"],
  "additionalProperties": true
}
```

## Important Notes

- User-provided values take precedence over default values defined in the schema
- Schemas cannot be edited directly; you must create a new schema to update rules
- Changes to schemas only affect new resources or updates to existing resources
- All property values in the current implementation must be of type `"string"`
