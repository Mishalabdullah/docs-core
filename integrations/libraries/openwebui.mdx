---
title: 'Open WebUI'
description: 'Cost tracking, observability, and more for Open WebUI'
---
This guide will help you implement enterprise-grade security, observability, and governance for OpenWebUI using Portkey. While OpenWebUI supports various provider plugins, Portkey provides a unified interface for all your LLM providers, offering comprehensive features for model management, cost tracking, observability, and metadata logging.

For IT administrators deploying centralized instances of OpenWebUI, Portkey enables essential enterprise features including usage tracking, access controls, and budget management. Let's walk through implementing these features step by step.

# Understanding the Implementation
When implementing Portkey with OpenWebUI in your organization, we'll follow these key steps:

1. Basic OpenWebUI integration with Portkey
2. Setting up organizational governance using Virtual Keys and Configs
3. Managing user access and permissions

<Note>
If you're an individual user just looking to use Portkey with OpenWebUI, you only need to complete Steps 1 and 2 to get started.
</Note>

## Step 1: Basic Integration 

Let's start by integrating Portkey with your OpenWebUI installation. This integration uses OpenWebUI's pipeline functionality to route all requests through Portkey's Platform.

### Installing the Portkey Plugin
1. Start your OpenWebUI server
2. Navigate to `Workspace` and then go to the `Functions` section
3. Click on the `+` button in UI
4. Copy and paste the [Portkey plugin](https://openwebui.com/f/nath/portkey/) code

## Step 2: Setting Up Portkey Pipeline

To use OpenWebUI with Portkey, you'll need to configure three key components:

### 1. Portkey API Key
Get your Portkey API key from [here](https://app.portkey.ai/api-keys). You'll need this for authentication with Portkey's services.

### 2. Virtual Keys
Virtual Keys are Portkey's secure way to manage your LLM provider API keys. They provide essential controls like:
- Budget limits for API usage
- Rate limiting capabilities
- Secure API key storage


Craeate a [Virtual Key](https://app.portkey.ai/virtual-keys) in your Portkey dashboard and save it for future use.

<Frame>
<img src="/images/integrations/openai/virtual-key-2.png" width="500"/>
</Frame>


For detailed information on budget limits, [refer to this documentation](/product/ai-gateway/virtual-keys/budget-limits)

### 3. Using Configs (Optional)
Configs in Portkey enhance your implementation with features like advanced routing, fallbacks, and retries. Here's a simple config example that implements 5 retry attempts on server errors:

```json
{
    "retry": {
        "attempts": 5
    },
    "virtual_key": "virtual-key-xxx"
}
```

Configs are highly flexible and can be customized for various use cases. Learn more in our [Configs documentation](https://docs.portkey.ai/configs).


### Step 3: Configure Pipeline Variables

The pipeline setup involves configuring both credentials and model access in OpenWebUI.

#### Credentials Setup
1. In OpenWebUI, navigate to `Workspace` â†’ `Functions`
2. Click the `Valves` button to open the configuration interface 
3. Add the following credentials:
   - Your Portkey API Key
   - Config slug (if using Configs)
   - Base URL (only needed for Open Source Gateway users)

<Frame>
<img src="/images/integrations/openwebui.png" width="600" />
</Frame>
#### Model Configuration
1. In the Functions section, click the `...` button and select `Edit`
2. Find the virtual keys JSON object in the Portkey function code
3. Update it with your virtual keys:
   ```json
   "virtual_keys": {
       "openai": "YOUR_OPENAI_VIRTUAL_KEY",
       "anthropic": "YOUR_ANTHROPIC_VIRTUAL_KEY"
   }
   ```
4. Configure model names using this format:
   ```json
   {provider_slug_from_portkey}/{model_id_from_provider}
   ```
   Example: `openai/gpt-3.5-turbo`
5. Save your changes

### Step 3: Setting Up Organizational Governance (Enterprises)
Many enterprises are choosing OpenWebUI as a secure, self-hosted alternative to ChatGPT. While OpenWebUI handles core functionality and data privacy compliance, enterprise deployments face several challenges:

- Cost control across multiple teams
- Model access management for different teams
- Usage tracking and attribution
- Security and compliance standards

Portkey adds a governance layer to address these challenges. Here's how to implement it:

#### 1. Set Budget Controls and Rate Limits 

Virtual Keys provide granular control over LLM access. Create different Virtual Keys for different departments/teams:

1. Go to the [Portkey AI dashboard](https://app.portkey.ai/virtual-keys) Virtual Keys page and creat your virtual keys
2. Set appropriate limits:
   - Monthly budget
   - Rate limits
3. Create and save your Virtual Key

<Frame>
<img src="/images/integrations/openai/virtual-key-2.png" width="500"/>
</Frame>

#### 2. Configure Model Routing Rules

As your OpenWebUI usage scales, you'll need rules for model access and request routing. Portkey Configs provide this control layer for your requests. Here's a simple config that routes your request to OpenAI with specifically GPT-4o.

```json
{
	"strategy": {
		"mode": "single"
	},
	"targets": [
		{
			"virtual_key": "YOUR_OPENAI_VIRTUAL_KEY",
			"override_params": {
				"model": "gpt-4o"
			}
		}
	]
}
```

Create your config on the [Configs page](https://app.portkey.ai/configs) in your Portkey dashboard. You'll need the config ID for connecting to OpenWebUI.



#### 3: Set Up Team Access Controls

Now that you have budget controls and routing rules, you'll need to create API keys for teams to use OpenWebUI with these controls. These keys will:
- Track usage automatically
- Apply the correct configs
- Collect metadata for each request

Create API keys through:
- [Portkey App](https://app.portkey.ai/)
- [API Key Management API](/api-reference/admin-api/control-plane/api-keys/create-api-key)

The Portkey plugin automatically captures user email as `_user` in metadata. You can add fields like department, project, or environment for detailed tracking.

Example using Python SDK:
```python
from portkey_ai import Portkey

portkey = Portkey(api_key="YOUR_ADMIN_API_KEY")

api_key = portkey.api_keys.create(
    name="engineering-team",
    type="organisation",
    workspace_id="YOUR_WORKSPACE_ID",
    defaults={
        "config_id": "your-config-id",
        "metadata": {
            "environment": "production",
            "department": "engineering"
        }
    },
    scopes=["logs.view", "configs.read"]
)
```

For detailed key management instructions, see our [API Keys documentation](/api-reference/admin-api/control-plane/api-keys/create-api-key).

### Step 4: Deploy to OpenWebUI Instances

Apply your governance setup to OpenWebUI instances using the Basic setup steps described earlier. Your OpenWebUI deployment now has enterprise-grade governance.

# Portkey Features

### Observability and Analytics
Once integrated, Portkey provides comprehensive visibility through our analytics dashboard:

- Real-time cost tracking
- Token usage monitoring
- Response time analytics
- 40+ key metrics
- Detailed Logs and Traces

<Frame>
  <img src="/images/product/product-1.png"/>
</Frame>

### Request Logging and Tracing
Track every request with detailed metadata and performance metrics:
<Frame>
    <img src="/images/product/product-2.avif"/>
</Frame>

### Organization Management and Access Control
Portkey's hierarchical organization structure includes:

- **Organizations**: Enterprise-level containers
- **Workspaces**: Team or project-specific environments
- **Users**: Team members with defined roles

This enables:
- Centralized organizational control
- Team-level access management
- Project isolation
- Resource usage tracking
- [SSO integration](/docs-core/product/enterprise-offering.mdx)

### Central Guardrails
Security is a major concern for companies using AI. Portkey implements organization-wide safety measures using built-in Guardrails, supporting both deterministic and LLM-based guardrails:
- PII detection and redaction
- Content filtering
- Regex Check, NSFW control
- Custom prompt validation

Learn more about [guardrails here](/docs-core/product/guardrails).

## Support

Need help with integration?
- Join our [Discord Community](https://portkey.wiki/community)